#!/usr/bin/perl -w

use File::Spec;

my @args = ();

foreach my $arg (@ARGV) {
    if ($arg =~ /^-/) {
        push @args, $arg;
    } else {
        my $path = File::Spec->rel2abs($arg);
        push @args, $path;
    }
}

my $img  = "mooreryan/zetahunter";
my $zh   = "/home/ZetaHunter/zeta_hunter.rb";
my $pull = "docker pull $img";
my $run  = "docker run -v \"\$HOME:\$HOME\" $img ruby $zh @args";

print "\n\n\nRUNNING COMMAND: $pull\n\n\n";
system("$pull");

print "\n\n\nRUNNING COMMAND: $run\n\n\n";
exec("$run");
